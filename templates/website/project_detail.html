{% extends 'base.html' %}
{% load static %}

{% block title %}{{ project.title }} - SEVO{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/projects.css' %}">
{% endblock %}

{% block content %}
<section class="container">
    <h1>{{ project.title }}</h1>
    
    {% if project.featured_image %}
    <img src="{{ project.featured_image.url }}" alt="{{ project.title }}" class="responsive-image">
    {% endif %}
    
    <div class="project-meta">
        <span class="badge">{{ project.get_status_display }}</span>
        <span>{{ project.get_category_display }}</span>
        <span>{{ project.location }}</span>
    </div>
    
    <div class="project-details">
        <h2>About This Project</h2>
        <p>{{ project.full_description|linebreaks }}</p>
        
        <h3>Project Timeline</h3>
        <p>Start Date: {{ project.start_date|date:"F d, Y" }}</p>
        {% if project.end_date %}
        <p>End Date: {{ project.end_date|date:"F d, Y" }}</p>
        {% endif %}
        
        <h3>Funding Progress</h3>
        <div class="progress-bar">
            <div class="progress" style="width: {{ project.progress_percentage }}%"></div>
        </div>
        <p>${{ project.current_amount|floatformat:0 }} raised of ${{ project.target_amount|floatformat:0 }} goal ({{ project.progress_percentage }}%)</p>
        
        <a href="{% url 'website:get_involved' %}" class="btn">Support This Project</a>
    </div>
    
    {% if donations %}
    <div class="recent-donations">
        <h3>Recent Donations</h3>
        <ul>
            {% for donation in donations %}
            <li>
                {% if donation.is_anonymous %}
                Anonymous
                {% else %}
                {{ donation.donor_name }}
                {% endif %}
                donated ${{ donation.amount|floatformat:0 }}
                <span>{{ donation.created_at|timesince }} ago</span>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
    
    <a href="{% url 'website:projects' %}" class="btn">Back to Projects</a>
</section>
{% endblock %}
